basePath: /api/v1
consumes:
- application/json
definitions:
  handlers.RejectRequest:
    properties:
      reason:
        example: Muy lejos
        type: string
    type: object
  httpx.JSendError:
    properties:
      code:
        example: 500
        type: integer
      message:
        example: Failed to connect to database
        type: string
      status:
        example: error
        type: string
    type: object
  httpx.JSendFail:
    properties:
      data:
        additionalProperties: {}
        type: object
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailAgeRestriction:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailAgeRestrictionData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailAgeRestrictionData:
    properties:
      birth_date:
        example: User must be at least 18 years old
        type: string
    type: object
  httpx.JSendFailDocumentIDInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailDocumentIDInvalidData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailDocumentIDInvalidData:
    properties:
      document_id:
        example: Formato de ID de documento inválido
        type: string
    type: object
  httpx.JSendFailDocumentType:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailDocumentTypeData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailDocumentTypeData:
    properties:
      type:
        example: 'Tipo de documento inválido - valores permitidos: circulation_card,
          ine_front, ine_back, driver_license_front, driver_license_back, profile_photo,
          fiscal_certificate'
        type: string
    type: object
  httpx.JSendFailEmailData:
    properties:
      email:
        example: Email already registered
        type: string
    type: object
  httpx.JSendFailEmailExists:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailEmailData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailFileSize:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailFileSizeData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailFileSizeData:
    properties:
      file:
        example: Archivo demasiado grande - máximo 10 MB permitido
        type: string
    type: object
  httpx.JSendFailFileType:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailFileTypeData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailFileTypeData:
    properties:
      file:
        example: Tipo de archivo no permitido - solo se permiten imágenes JPEG/PNG
          y archivos PDF
        type: string
    type: object
  httpx.JSendFailFiscalRegimeInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailFiscalRegimeInvalidData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailFiscalRegimeInvalidData:
    properties:
      error:
        example: 'régimen fiscal inválido - valores permitidos: general, simplificado_confianza,
          actividad_empresarial, arrendamiento, salarios, incorporacion_fiscal'
        type: string
    type: object
  httpx.JSendFailInvalidJSON:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailInvalidJSONData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailInvalidJSONData:
    properties:
      error:
        example: Cuerpo de solicitud inválido
        type: string
    type: object
  httpx.JSendFailOTPData:
    properties:
      otp:
        example: Invalid OTP code
        type: string
    type: object
  httpx.JSendFailOTPExpired:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailOTPExpiredData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailOTPExpiredData:
    properties:
      otp:
        example: OTP has expired - please request a new one
        type: string
    type: object
  httpx.JSendFailOTPInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailOTPData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailPhoneData:
    properties:
      phone:
        example: 'Invalid phone format (use E.164 format: +525512345678)'
        type: string
    type: object
  httpx.JSendFailPhoneExists:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailPhoneExistsData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailPhoneExistsData:
    properties:
      phone:
        example: Phone number already registered
        type: string
    type: object
  httpx.JSendFailPhoneInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailPhoneData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailPhoneNotVerified:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailPhoneNotVerifiedData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailPhoneNotVerifiedData:
    properties:
      phone:
        example: Phone not verified - please verify OTP first
        type: string
    type: object
  httpx.JSendFailRFCInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailRFCInvalidData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailRFCInvalidData:
    properties:
      error:
        example: formato de RFC inválido (debe tener 13 caracteres alfanuméricos)
        type: string
    type: object
  httpx.JSendFailUserIDInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailUserIDInvalidData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailUserIDInvalidData:
    properties:
      user_id:
        example: Formato de ID de usuario inválido
        type: string
    type: object
  httpx.JSendFailZipCodeInvalid:
    properties:
      data:
        $ref: '#/definitions/httpx.JSendFailZipCodeInvalidData'
      status:
        example: fail
        type: string
    type: object
  httpx.JSendFailZipCodeInvalidData:
    properties:
      error:
        example: formato de código postal inválido (debe tener 5 dígitos)
        type: string
    type: object
  httpx.JSendSuccess:
    properties:
      data:
        type: object
      status:
        example: success
        type: string
    type: object
  internal_documents_models.PaginationMetadata:
    properties:
      current_page:
        example: 1
        type: integer
      has_next:
        example: true
        type: boolean
      has_previous:
        example: false
        type: boolean
      next_url:
        example: /api/v1/documents?page=2&limit=20
        type: string
      per_page:
        example: 20
        type: integer
      previous_url:
        example: /api/v1/documents?page=1&limit=20
        type: string
      total_items:
        example: 100
        type: integer
      total_pages:
        example: 5
        type: integer
    type: object
  internal_notifications_models.PaginationMetadata:
    properties:
      current_page:
        example: 1
        type: integer
      has_next:
        example: true
        type: boolean
      has_previous:
        example: false
        type: boolean
      next_url:
        example: /api/v1/notifications?page=2&limit=20
        type: string
      per_page:
        example: 20
        type: integer
      previous_url:
        type: string
      total_items:
        example: 100
        type: integer
      total_pages:
        example: 5
        type: integer
    type: object
  models.ActiveSession:
    properties:
      created_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      device_info:
        example: Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X)
        type: string
      expires_at:
        example: "2025-04-15T10:30:00Z"
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      ip_address:
        example: 192.168.1.1
        type: string
    type: object
  models.ActiveSessionsResponse:
    properties:
      sessions:
        items:
          $ref: '#/definitions/models.ActiveSession'
        type: array
    type: object
  models.ActiveSessionsResponseWrapper:
    properties:
      data:
        $ref: '#/definitions/models.ActiveSessionsResponse'
      status:
        example: success
        type: string
    type: object
  models.AssignmentStatus:
    enum:
    - pending
    - accepted
    - rejected
    - timeout
    - expired
    type: string
    x-enum-varnames:
    - AssignmentStatusPending
    - AssignmentStatusAccepted
    - AssignmentStatusRejected
    - AssignmentStatusTimeout
    - AssignmentStatusExpired
  models.AuthResponse:
    properties:
      access_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAiLCJleHAiOjE3MzczOTA2MDAsImlhdCI6MTczNzM4NzYwMCwidHlwZSI6ImFjY2VzcyJ9.dGhpc2lzYW1vY2tzaWduYXR1cmU
        type: string
      refresh_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAiLCJleHAiOjE3Mzk5Nzk2MDAsImlhdCI6MTczNzM4NzYwMCwidHlwZSI6InJlZnJlc2gifQ.dGhpc2lzYW1vY2tzaWduYXR1cmU
        type: string
      user:
        $ref: '#/definitions/models.User'
    type: object
  models.CancelOrderRequest:
    properties:
      reason:
        example: Cliente solicitó cancelación
        type: string
    required:
    - reason
    type: object
  models.CompleteRegistrationResponse:
    properties:
      data:
        $ref: '#/definitions/models.AuthResponse'
      status:
        example: success
        type: string
    type: object
  models.CreateExternalOrderRequest:
    properties:
      customer_name:
        example: María García
        type: string
      customer_phone:
        example: "+525512345678"
        type: string
      delivery_address:
        example: Calle Reforma 567
        type: string
      delivery_code:
        example: "1234"
        type: string
      delivery_fee:
        example: 25
        type: number
      delivery_instructions:
        example: Tocar 302
        type: string
      delivery_latitude:
        example: 19.426608
        maximum: 90
        minimum: -90
        type: number
      delivery_longitude:
        example: -99.166209
        maximum: 180
        minimum: -180
        type: number
      external_order_id:
        example: EXT-ORDER-12345
        type: string
      items:
        items:
          $ref: '#/definitions/models.OrderItem'
        minItems: 1
        type: array
      merchant_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
      pickup_address:
        example: Av. Insurgentes Sur 1234
        type: string
      pickup_instructions:
        example: Local 5
        type: string
      pickup_latitude:
        example: 19.432608
        maximum: 90
        minimum: -90
        type: number
      pickup_longitude:
        example: -99.133209
        maximum: 180
        minimum: -180
        type: number
      total_amount:
        example: 250.5
        type: number
    required:
    - customer_name
    - customer_phone
    - delivery_address
    - delivery_code
    - delivery_latitude
    - delivery_longitude
    - external_order_id
    - items
    - merchant_id
    - pickup_address
    - pickup_latitude
    - pickup_longitude
    - total_amount
    type: object
  models.CreateMerchantRequest:
    properties:
      address:
        example: Av. Insurgentes Sur 1234, Col. Del Valle
        type: string
      business_name:
        example: Tacos El Güero
        maxLength: 255
        minLength: 2
        type: string
      business_type:
        example: restaurant
        type: string
      city:
        example: Ciudad de México
        type: string
      email:
        example: contacto@tacoselguero.com
        type: string
      latitude:
        example: 19.432608
        maximum: 90
        minimum: -90
        type: number
      longitude:
        example: -99.133209
        maximum: 180
        minimum: -180
        type: number
      phone:
        example: "+525512345678"
        type: string
      postal_code:
        example: "03100"
        type: string
      state:
        example: CDMX
        type: string
    required:
    - address
    - business_name
    - business_type
    - city
    - latitude
    - longitude
    - phone
    - state
    type: object
  models.CreateNotificationRequest:
    properties:
      body:
        example: 'Tu pedido #1234 está en camino'
        type: string
      data:
        type: string
      notification_type:
        allOf:
        - $ref: '#/definitions/models.NotificationType'
        enum:
        - order_created
        - order_updated
        - order_assigned
        - order_in_transit
        - order_delivered
        - order_canceled
        - payment_received
        - payment_failed
        - driver_assigned
        - driver_nearby
        - general
        - promotional
        example: order_in_transit
      title:
        example: Pedido en camino
        maxLength: 255
        type: string
      user_id:
        example: d53b655c-e833-400e-b0e8-ee68ea18e2cc
        type: string
    required:
    - body
    - notification_type
    - title
    - user_id
    type: object
  models.DeviceType:
    enum:
    - android
    - ios
    - web
    type: string
    x-enum-varnames:
    - DeviceTypeAndroid
    - DeviceTypeIOS
    - DeviceTypeWeb
  models.DocumentListResponse:
    properties:
      data:
        properties:
          items:
            items:
              $ref: '#/definitions/models.UserDocument'
            type: array
          pagination:
            $ref: '#/definitions/internal_documents_models.PaginationMetadata'
        type: object
      status:
        example: success
        type: string
    type: object
  models.DocumentResponse:
    properties:
      data:
        $ref: '#/definitions/models.UserDocument'
      status:
        example: success
        type: string
    type: object
  models.DriverLocation:
    properties:
      accuracy_meters:
        example: 10.5
        type: number
      driver_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
      heading:
        example: 45.5
        type: number
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      is_available:
        example: true
        type: boolean
      latitude:
        example: 19.432608
        type: number
      longitude:
        example: -99.133209
        type: number
      speed_kmh:
        example: 35.2
        type: number
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
    type: object
  models.DriverLocationResponse:
    properties:
      data:
        $ref: '#/definitions/models.DriverLocation'
      status:
        example: success
        type: string
    type: object
  models.FCMToken:
    properties:
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      device_id:
        example: device-abc-123
        type: string
      device_type:
        allOf:
        - $ref: '#/definitions/models.DeviceType'
        enum:
        - android
        - ios
        - web
        example: android
      id:
        example: d53b655c-e833-400e-b0e8-ee68ea18e2cc
        type: string
      is_active:
        example: true
        type: boolean
      last_used_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      token:
        example: fL8X9Y2Z3A4B5C6D7E8F9G0H1I2J3K4L5M6N7O8P9Q0R1S2T3U4V5W6X7Y8Z9A0B1C
        type: string
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      user_id:
        example: d53b655c-e833-400e-b0e8-ee68ea18e2cc
        type: string
    type: object
  models.FiscalRegime:
    enum:
    - general
    - simplificado_confianza
    - actividad_empresarial
    - arrendamiento
    - salarios
    - incorporacion_fiscal
    type: string
    x-enum-varnames:
    - FiscalRegimeGeneral
    - FiscalRegimeSimplificadoConfianza
    - FiscalRegimeActividadEmpresarial
    - FiscalRegimeArrendamiento
    - FiscalRegimeSalarios
    - FiscalRegimeIncorporacionFiscal
  models.LoginRequest:
    properties:
      email:
        example: juan.perez@example.com
        type: string
      password:
        example: SecurePass123!
        type: string
    required:
    - email
    - password
    type: object
  models.LoginResponse:
    properties:
      data:
        $ref: '#/definitions/models.AuthResponse'
      status:
        example: success
        type: string
    type: object
  models.LogoutRequest:
    properties:
      refresh_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    required:
    - refresh_token
    type: object
  models.LogoutResponse:
    properties:
      message:
        example: Sesión cerrada exitosamente
        type: string
    type: object
  models.LogoutResponseWrapper:
    properties:
      data:
        $ref: '#/definitions/models.LogoutResponse'
      status:
        example: success
        type: string
    type: object
  models.Merchant:
    properties:
      address:
        example: Av. Insurgentes Sur 1234, Col. Del Valle
        type: string
      business_name:
        example: Tacos El Güero
        type: string
      business_type:
        example: restaurant
        type: string
      city:
        example: Ciudad de México
        type: string
      country:
        example: MX
        type: string
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      email:
        example: contacto@tacoselguero.com
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      latitude:
        example: 19.432608
        type: number
      longitude:
        example: -99.133209
        type: number
      phone:
        example: "+525512345678"
        type: string
      postal_code:
        example: "03100"
        type: string
      rating:
        example: 4.5
        type: number
      state:
        example: CDMX
        type: string
      status:
        enum:
        - active
        - inactive
        - suspended
        example: active
        type: string
      total_orders:
        example: 125
        type: integer
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      user_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
    type: object
  models.MerchantListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.Merchant'
        type: array
      status:
        example: success
        type: string
    type: object
  models.MerchantResponse:
    properties:
      data:
        $ref: '#/definitions/models.Merchant'
      status:
        example: success
        type: string
    type: object
  models.Notification:
    properties:
      body:
        example: 'Tu pedido #1234 está en camino'
        type: string
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      data:
        type: string
      id:
        example: d53b655c-e833-400e-b0e8-ee68ea18e2cc
        type: string
      is_read:
        example: false
        type: boolean
      notification_type:
        allOf:
        - $ref: '#/definitions/models.NotificationType'
        enum:
        - order_created
        - order_updated
        - order_assigned
        - order_in_transit
        - order_delivered
        - order_canceled
        - payment_received
        - payment_failed
        - driver_assigned
        - driver_nearby
        - general
        - promotional
        example: order_in_transit
      read_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      title:
        example: Pedido en camino
        type: string
      user_id:
        example: d53b655c-e833-400e-b0e8-ee68ea18e2cc
        type: string
    type: object
  models.NotificationListResponse:
    properties:
      data:
        properties:
          items:
            items:
              $ref: '#/definitions/models.Notification'
            type: array
          pagination:
            $ref: '#/definitions/internal_notifications_models.PaginationMetadata'
        type: object
      status:
        example: success
        type: string
    type: object
  models.NotificationResponse:
    properties:
      data:
        $ref: '#/definitions/models.Notification'
      status:
        example: success
        type: string
    type: object
  models.NotificationType:
    enum:
    - order_created
    - order_updated
    - order_assigned
    - order_in_transit
    - order_delivered
    - order_canceled
    - payment_received
    - payment_failed
    - driver_assigned
    - driver_nearby
    - general
    - promotional
    type: string
    x-enum-varnames:
    - NotificationTypeOrderCreated
    - NotificationTypeOrderUpdated
    - NotificationTypeOrderAssigned
    - NotificationTypeOrderInTransit
    - NotificationTypeOrderDelivered
    - NotificationTypeOrderCanceled
    - NotificationTypePaymentReceived
    - NotificationTypePaymentFailed
    - NotificationTypeDriverAssigned
    - NotificationTypeDriverNearby
    - NotificationTypeGeneral
    - NotificationTypePromotional
  models.OTPSentResponse:
    properties:
      message:
        example: OTP sent to phone
        type: string
      otp_expires_at:
        example: "2025-01-20T12:35:00Z"
        type: string
      phone:
        example: "+525512345678"
        type: string
    type: object
  models.Order:
    properties:
      accepted_at:
        example: "2025-01-15T10:01:30Z"
        type: string
      assigned_at:
        example: "2025-01-15T10:01:00Z"
        type: string
      cancellation_reason:
        type: string
      cancelled_at:
        type: string
      cancelled_by:
        type: string
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      customer_name:
        example: María García
        type: string
      customer_phone:
        example: "+525512345678"
        type: string
      delivered_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      delivery_address:
        example: Calle Reforma 567
        type: string
      delivery_code:
        example: "1234"
        type: string
      delivery_fee:
        example: 25
        type: number
      delivery_instructions:
        example: Tocar interfon 302
        type: string
      delivery_latitude:
        example: 19.426608
        type: number
      delivery_longitude:
        example: -99.166209
        type: number
      distance_km:
        example: 5.2
        type: number
      driver_id:
        example: 987e6543-e21b-12d3-a456-426614174000
        type: string
      estimated_duration_minutes:
        example: 15
        type: integer
      external_order_id:
        example: EXT-ORDER-12345
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      items:
        items:
          type: object
        type: array
      merchant_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
      picked_up_at:
        example: "2025-01-15T10:15:00Z"
        type: string
      pickup_address:
        example: Av. Insurgentes Sur 1234
        type: string
      pickup_instructions:
        example: Local 5, planta baja
        type: string
      pickup_latitude:
        example: 19.432608
        type: number
      pickup_longitude:
        example: -99.133209
        type: number
      status:
        allOf:
        - $ref: '#/definitions/models.OrderStatus'
        example: searching_driver
      total_amount:
        example: 250.5
        type: number
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
    type: object
  models.OrderAssignment:
    properties:
      attempt_number:
        type: integer
      created_at:
        type: string
      distance_to_pickup_km:
        type: number
      driver_id:
        type: string
      estimated_arrival_minutes:
        type: integer
      expires_at:
        type: string
      id:
        type: string
      order_id:
        type: string
      rejection_reason:
        type: string
      responded_at:
        type: string
      search_radius_km:
        type: number
      status:
        $ref: '#/definitions/models.AssignmentStatus'
    type: object
  models.OrderItem:
    properties:
      name:
        example: Tacos al Pastor
        type: string
      price:
        example: 15
        type: number
      quantity:
        example: 3
        type: integer
    type: object
  models.OrderListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.Order'
        type: array
      status:
        example: success
        type: string
    type: object
  models.OrderResponse:
    properties:
      data:
        $ref: '#/definitions/models.Order'
      status:
        example: success
        type: string
    type: object
  models.OrderStatus:
    enum:
    - searching_driver
    - assigned
    - accepted
    - picked_up
    - in_transit
    - delivered
    - cancelled
    - no_driver_available
    type: string
    x-enum-varnames:
    - OrderStatusSearchingDriver
    - OrderStatusAssigned
    - OrderStatusAccepted
    - OrderStatusPickedUp
    - OrderStatusInTransit
    - OrderStatusDelivered
    - OrderStatusCancelled
    - OrderStatusNoDriverAvailable
  models.RefreshRequest:
    properties:
      refresh_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAiLCJleHAiOjE3Mzk5Nzk2MDAsImlhdCI6MTczNzM4NzYwMCwidHlwZSI6InJlZnJlc2gifQ.dGhpc2lzYW1vY2tzaWduYXR1cmU
        type: string
    required:
    - refresh_token
    type: object
  models.RefreshResponse:
    properties:
      data:
        $ref: '#/definitions/models.AuthResponse'
      status:
        example: success
        type: string
    type: object
  models.RegisterRequest:
    properties:
      birth_date:
        example: "1990-05-15"
        type: string
      email:
        description: Step 3 fields (required for complete registration)
        example: juan.perez@example.com
        type: string
      first_name:
        description: Step 1 fields (optional for OTP send)
        example: Juan
        maxLength: 100
        minLength: 2
        type: string
      last_name:
        example: Pérez
        maxLength: 100
        minLength: 2
        type: string
      mother_last_name:
        example: González
        maxLength: 100
        type: string
      otp:
        example: "123456"
        type: string
      password:
        example: SecurePass123!
        maxLength: 72
        minLength: 6
        type: string
      phone:
        description: Step 2 fields (required for both modes)
        example: "+525512345678"
        type: string
    required:
    - phone
    type: object
  models.RegisterResponse:
    properties:
      data:
        $ref: '#/definitions/models.OTPSentResponse'
      status:
        example: success
        type: string
    type: object
  models.RegisterTokenRequest:
    properties:
      device_id:
        example: device-abc-123
        type: string
      device_type:
        allOf:
        - $ref: '#/definitions/models.DeviceType'
        enum:
        - android
        - ios
        - web
        example: android
      token:
        example: fL8X9Y2Z3A4B5C6D7E8F9G0H1I2J3K4L5M6N7O8P9Q0R1S2T3U4V5W6X7Y8Z9A0B1C
        type: string
    required:
    - device_type
    - token
    type: object
  models.TokenResponse:
    properties:
      data:
        $ref: '#/definitions/models.FCMToken'
      status:
        example: success
        type: string
    type: object
  models.UnreadCountResponse:
    properties:
      data:
        properties:
          count:
            example: 5
            type: integer
        type: object
      status:
        example: success
        type: string
    type: object
  models.UnregisterTokenRequest:
    properties:
      token:
        example: fL8X9Y2Z3A4B5C6D7E8F9G0H1I2J3K4L5M6N7O8P9Q0R1S2T3U4V5W6X7Y8Z9A0B1C
        type: string
    required:
    - token
    type: object
  models.UpdateAvailabilityRequest:
    properties:
      is_available:
        example: true
        type: boolean
    required:
    - is_available
    type: object
  models.UpdateDocumentRequest:
    properties:
      circulation_card_url:
        description: Document URLs
        example: https://storage.example.com/docs/circulation_card.jpg
        type: string
      driver_license_back_url:
        example: https://storage.example.com/docs/license_back.jpg
        type: string
      driver_license_front_url:
        example: https://storage.example.com/docs/license_front.jpg
        type: string
      fiscal_certificate_url:
        example: https://storage.example.com/docs/fiscal_cert.pdf
        type: string
      fiscal_city:
        example: Ciudad de México
        type: string
      fiscal_ext_number:
        example: "222"
        type: string
      fiscal_int_number:
        example: Piso 5
        type: string
      fiscal_name:
        description: Fiscal Information
        example: Juan Pérez García
        type: string
      fiscal_neighborhood:
        example: Juárez
        type: string
      fiscal_regime:
        allOf:
        - $ref: '#/definitions/models.FiscalRegime'
        enum:
        - general
        - simplificado_confianza
        - actividad_empresarial
        - arrendamiento
        - salarios
        - incorporacion_fiscal
        example: actividad_empresarial
      fiscal_rfc:
        example: PEGJ850101ABC
        type: string
      fiscal_state:
        example: CDMX
        type: string
      fiscal_street:
        example: Paseo de la Reforma
        type: string
      fiscal_zip_code:
        example: "06600"
        type: string
      ine_back_url:
        example: https://storage.example.com/docs/ine_back.jpg
        type: string
      ine_front_url:
        example: https://storage.example.com/docs/ine_front.jpg
        type: string
      license_plate:
        example: ABC-123-XYZ
        type: string
      profile_photo_url:
        example: https://storage.example.com/docs/profile.jpg
        type: string
      vehicle_brand:
        description: Vehicle Information
        example: Honda
        type: string
      vehicle_model:
        example: CBR 250
        type: string
    type: object
  models.UpdateLocationRequest:
    properties:
      accuracy_meters:
        example: 10.5
        minimum: 0
        type: number
      heading:
        example: 45.5
        maximum: 360
        minimum: 0
        type: number
      latitude:
        example: 19.432608
        maximum: 90
        minimum: -90
        type: number
      longitude:
        example: -99.133209
        maximum: 180
        minimum: -180
        type: number
      speed_kmh:
        example: 35.2
        minimum: 0
        type: number
    required:
    - latitude
    - longitude
    type: object
  models.UpdateMerchantRequest:
    properties:
      address:
        example: Av. Insurgentes Sur 1234, Col. Del Valle
        type: string
      business_name:
        example: Tacos El Güero
        maxLength: 255
        minLength: 2
        type: string
      email:
        example: contacto@tacoselguero.com
        type: string
      latitude:
        example: 19.432608
        maximum: 90
        minimum: -90
        type: number
      longitude:
        example: -99.133209
        maximum: 180
        minimum: -180
        type: number
      phone:
        example: "+525512345678"
        type: string
      postal_code:
        example: "03100"
        type: string
    type: object
  models.UpdateOrderStatusRequest:
    properties:
      status:
        example: accepted
        type: string
    required:
    - status
    type: object
  models.User:
    properties:
      account_status:
        enum:
        - pending
        - active
        - suspended
        example: active
        type: string
      birth_date:
        example: "1990-05-15T00:00:00Z"
        type: string
      created_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      email:
        example: juan.perez@example.com
        type: string
      first_name:
        example: Juan
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      last_name:
        example: Pérez
        type: string
      mother_last_name:
        example: González
        type: string
      name:
        example: Juan Pérez
        type: string
      phone:
        example: "+525512345678"
        type: string
      phone_verified:
        example: true
        type: boolean
      role:
        enum:
        - customer
        - merchant
        - driver
        - admin
        example: customer
        type: string
      updated_at:
        example: "2025-01-15T10:30:00Z"
        type: string
    type: object
  models.UserDocument:
    properties:
      circulation_card_url:
        example: https://storage.example.com/docs/circulation_card.jpg
        type: string
      created_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      driver_license_back_url:
        example: https://storage.example.com/docs/license_back.jpg
        type: string
      driver_license_front_url:
        example: https://storage.example.com/docs/license_front.jpg
        type: string
      fiscal_certificate_url:
        example: https://storage.example.com/docs/fiscal_cert.pdf
        type: string
      fiscal_city:
        example: Ciudad de México
        type: string
      fiscal_ext_number:
        example: "222"
        type: string
      fiscal_int_number:
        example: Piso 5
        type: string
      fiscal_name:
        example: Juan Pérez García
        type: string
      fiscal_neighborhood:
        example: Juárez
        type: string
      fiscal_regime:
        allOf:
        - $ref: '#/definitions/models.FiscalRegime'
        enum:
        - general
        - simplificado_confianza
        - actividad_empresarial
        - arrendamiento
        - salarios
        - incorporacion_fiscal
        example: actividad_empresarial
      fiscal_rfc:
        example: PEGJ850101ABC
        type: string
      fiscal_state:
        example: CDMX
        type: string
      fiscal_street:
        example: Paseo de la Reforma
        type: string
      fiscal_zip_code:
        example: "06600"
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      ine_back_url:
        example: https://storage.example.com/docs/ine_back.jpg
        type: string
      ine_front_url:
        example: https://storage.example.com/docs/ine_front.jpg
        type: string
      license_plate:
        example: ABC-123-XYZ
        type: string
      profile_photo_url:
        example: https://storage.example.com/docs/profile.jpg
        type: string
      reviewed:
        example: false
        type: boolean
      updated_at:
        example: "2025-01-15T11:00:00Z"
        type: string
      user_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
      vehicle_brand:
        example: Honda
        type: string
      vehicle_model:
        example: CBR 250
        type: string
    type: object
  models.UserProfile:
    properties:
      created_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      email:
        example: juan.perez@example.com
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      name:
        example: Juan Pérez
        type: string
      phone:
        example: "+525512345678"
        type: string
      role:
        enum:
        - customer
        - merchant
        - driver
        - admin
        example: customer
        type: string
      updated_at:
        example: "2025-01-15T10:30:00Z"
        type: string
    type: object
  models.UserProfileResponse:
    properties:
      data:
        $ref: '#/definitions/models.UserProfile'
      status:
        example: success
        type: string
    type: object
  models.VerifyDeliveryCodeRequest:
    properties:
      delivery_code:
        example: "1234"
        type: string
    required:
    - delivery_code
    type: object
  models.VerifyOTPRequest:
    properties:
      otp:
        example: "123456"
        type: string
      phone:
        example: "+525512345678"
        type: string
    required:
    - otp
    - phone
    type: object
  models.VerifyOTPResponse:
    properties:
      message:
        example: Phone verified successfully
        type: string
      phone:
        example: "+525512345678"
        type: string
      verified:
        example: true
        type: boolean
    type: object
  models.VerifyOTPResponseWrapper:
    properties:
      data:
        $ref: '#/definitions/models.VerifyOTPResponse'
      status:
        example: success
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: Delivery marketplace API for customers, merchants, and drivers.
  title: TacoShare Delivery API
  version: "1.0"
paths:
  /assignments/{order_id}/accept:
    post:
      consumes:
      - application/json
      description: Accept a pending order assignment
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Assignment accepted
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid order ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Assignment not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Accept assignment
      tags:
      - assignments
  /assignments/{order_id}/reject:
    post:
      consumes:
      - application/json
      description: Reject a pending order assignment
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Reject reason
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.RejectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Assignment rejected
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Reject assignment
      tags:
      - assignments
  /assignments/pending:
    get:
      consumes:
      - application/json
      description: Get all pending assignments for the authenticated driver
      produces:
      - application/json
      responses:
        "200":
          description: Pending assignments retrieved
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get pending assignments for driver
      tags:
      - assignments
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate user with email and password. Returns access token
        (valid for 1 hour) and refresh token (valid for 30 days). Access token should
        be included in Authorization header as "Bearer {token}" for protected endpoints.
        The response includes complete user information (ID, name, email, phone, role)
        along with the authentication tokens.
      parameters:
      - description: User credentials - email and password
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful - returns access token (JWT, expires in 1h),
            refresh token (JWT, expires in 30d), and complete user profile
          schema:
            $ref: '#/definitions/models.LoginResponse'
        "400":
          description: Invalid request body (malformed JSON) or missing required fields
            (email/password)
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Invalid credentials - incorrect email or password combination
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - database connection failed or unexpected
            error during authentication
          schema:
            $ref: '#/definitions/httpx.JSendError'
      summary: User login
      tags:
      - auth
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Revoke a specific refresh token to logout from a single device.
        The refresh token will be marked as revoked and cannot be used again. Access
        tokens remain valid until they expire (15 minutes), but without a valid refresh
        token, the user cannot obtain new access tokens and will need to login again.
      parameters:
      - description: Refresh token to revoke
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.LogoutRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful - refresh token revoked
          schema:
            $ref: '#/definitions/models.LogoutResponseWrapper'
        "400":
          description: Invalid request body or missing refresh_token field
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - user not authenticated
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Refresh token not found in database
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to revoke token
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - auth
  /auth/logout-all:
    post:
      consumes:
      - application/json
      description: Revoke all refresh tokens for the authenticated user, effectively
        logging out from all devices. This is useful when a user suspects their account
        has been compromised or wants to terminate all active sessions. All existing
        refresh tokens will be marked as revoked.
      produces:
      - application/json
      responses:
        "200":
          description: All sessions logged out successfully
          schema:
            $ref: '#/definitions/models.LogoutResponseWrapper'
        "401":
          description: Unauthorized - user not authenticated
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to revoke tokens
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Logout from all devices
      tags:
      - auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Generate new access and refresh tokens using a valid refresh token.
        Use this endpoint when the access token expires (after 1 hour). The old refresh
        token will be invalidated and replaced with a new one for security. Both tokens
        are JWT format. The response includes the new tokens and updated user information.
      parameters:
      - description: Refresh token from previous login or refresh
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Tokens refreshed successfully - returns new access token (expires
            in 1h), new refresh token (expires in 30d), and user profile
          schema:
            $ref: '#/definitions/models.RefreshResponse'
        "400":
          description: Invalid request body (malformed JSON) or missing refresh_token
            field
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Invalid refresh token (malformed JWT, expired, or revoked)
            or associated user account no longer exists
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - database failure or token generation
            error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      summary: Refresh access token
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: 'Two-step registration process with phone verification. **Step
        1 (Send OTP)**: Send only phone to receive 6-digit OTP via SMS (expires in
        10 min). **Step 2 (Complete Registration)**: After verifying OTP with /auth/verify-otp,
        send complete registration data including personal info, verified phone, and
        credentials to create account. Password requirements: 6-72 characters. Age
        requirement: 18+ years old (calculated from birth_date). Returns access token
        (1h validity) and refresh token (30d validity) upon successful registration.'
      parameters:
      - description: 'Step 1: phone only | Step 2: all fields after OTP verification'
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OTP sent successfully to phone - valid for 10 minutes
          schema:
            $ref: '#/definitions/models.RegisterResponse'
        "201":
          description: User account created successfully with authentication tokens
          schema:
            $ref: '#/definitions/models.CompleteRegistrationResponse'
        "400":
          description: User age verification failed - must be 18 years or older
          schema:
            $ref: '#/definitions/httpx.JSendFailAgeRestriction'
        "500":
          description: Internal server error - SMS service failure or database error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      summary: User registration with OTP verification
      tags:
      - auth
  /auth/sessions:
    get:
      consumes:
      - application/json
      description: Retrieve all active sessions (non-revoked, non-expired refresh
        tokens) for the authenticated user. Returns session details including device
        information, IP address, creation time, and expiration time. Useful for users
        to see where they are currently logged in.
      produces:
      - application/json
      responses:
        "200":
          description: Active sessions retrieved successfully
          schema:
            $ref: '#/definitions/models.ActiveSessionsResponseWrapper'
        "401":
          description: Unauthorized - user not authenticated
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to retrieve sessions
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get active sessions
      tags:
      - auth
  /auth/verify-otp:
    post:
      consumes:
      - application/json
      description: Verify the 6-digit OTP code sent via SMS to the user's phone number.
        This endpoint validates the OTP and marks the phone number as verified in
        the system, which is required before completing registration. OTP codes expire
        after 10 minutes. After successful verification, proceed to POST /auth/register
        with complete registration data including the verified phone number.
      parameters:
      - description: Phone and 6-digit OTP code
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.VerifyOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Phone number verified successfully - can now complete registration
          schema:
            $ref: '#/definitions/models.VerifyOTPResponseWrapper'
        "400":
          description: OTP code has expired (10 minute validity) - request a new OTP
            via POST /auth/register
          schema:
            $ref: '#/definitions/httpx.JSendFailOTPExpired'
        "500":
          description: Internal server error - database error during OTP verification
          schema:
            $ref: '#/definitions/httpx.JSendError'
      summary: Verify OTP code
      tags:
      - auth
  /documents:
    get:
      consumes:
      - application/json
      description: '**Admin-only endpoint** to retrieve all user documents with pagination.
        Returns paginated list of document records with complete information including
        vehicle data, document URLs, fiscal information, and review status. Used by
        admins to view pending document submissions that need review. **Pagination**:
        Use query parameters `page` (default: 1) and `limit` (default: 20, max: 100).
        **Access control**: Requires admin role JWT - non-admin users receive 403
        Forbidden. Documents are ordered by creation date (newest first). Returns
        empty array if no documents exist in the system.'
      parameters:
      - default: 1
        description: 'Page number (default: 1)'
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 'Items per page (default: 20, max: 100)'
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Successfully retrieved paginated documents with metadata
          schema:
            $ref: '#/definitions/models.DocumentListResponse'
        "400":
          description: Invalid pagination parameters
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: "Forbidden - user does not have admin role\"\texample({\"status\":
            \"error\", \"message\": \"Acceso denegado - se requiere rol de administrador\",
            \"code\": 403})"
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - database query failed or connection
            error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get all documents (Admin)
      tags:
      - documents
  /documents/{document_id}:
    patch:
      consumes:
      - application/json
      description: '**Admin-only endpoint** to update a document''s review status
        by its document ID (not user ID). Similar to PATCH /documents/{user_id}/review
        but uses document ID for direct document manipulation. **Use case**: Admin
        dashboard where documents are listed with their IDs - admin can approve/reject
        directly using the document ID without needing to look up the user ID. Request
        body must contain boolean ''reviewed'' field. **Access control**: Requires
        admin role JWT - non-admin users receive 403 Forbidden. The document_id path
        parameter must be valid UUID. Returns success message with updated review
        status. Returns 404 if document ID doesn''t exist.'
      parameters:
      - description: Document ID in UUID format
        example: 550e8400-e29b-41d4-a716-446655440000
        in: path
        name: document_id
        required: true
        type: string
      - description: Review status - true to approve, false to reject
        in: body
        name: request
        required: true
        schema:
          properties:
            reviewed:
              type: boolean
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: "Review status updated successfully\"\texample({\"status\":
            \"success\", \"data\": {\"message\": \"Estado de revisión actualizado
            exitosamente\", \"reviewed\": true}})"
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid request body - malformed JSON or missing reviewed field
          schema:
            $ref: '#/definitions/httpx.JSendFailInvalidJSON'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: "Forbidden - user does not have admin role\"\t\t\texample({\"status\":
            \"error\", \"message\": \"Acceso denegado - se requiere rol de administrador\",
            \"code\": 403})"
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: "Document not found - document ID doesn't exist\"\texample({\"status\":
            \"fail\", \"data\": {\"error\": \"Documento no encontrado\"}})"
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - database update operation failed or
            connection error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Update document status by ID (Admin)
      tags:
      - documents
  /documents/{user_id}:
    get:
      consumes:
      - application/json
      description: '**Admin-only endpoint** to retrieve document record for any user
        by their UUID. Used in driver onboarding workflow: admin reviews submitted
        documents, verifies authenticity (INE, driver license, circulation card match
        real identity), checks fiscal compliance (RFC format, tax certificate validity),
        and inspects vehicle documentation. Returns complete document record including:
        **Vehicle Info** (brand, model, license plate), **Document URLs** (INE front/back,
        driver license front/back, circulation card, profile photo - stored in R2),
        **Fiscal Data** (fiscal name, RFC, tax regime, complete address, zip code,
        tax certificate URL), and **Review Status** (reviewed boolean). **Access control**:
        Requires admin role JWT - non-admin users receive 403 Forbidden. The user_id
        path parameter must be valid UUID format. **Workflow**: 1) GET this endpoint
        to inspect documents, 2) Manually verify documents for authenticity, 3) PATCH
        /documents/{user_id}/review to approve/reject. Returns 404 if user has no
        document record.'
      parameters:
      - description: User ID in UUID format
        example: 550e8400-e29b-41d4-a716-446655440000
        in: path
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Document record retrieved successfully with all fields and
            review status
          schema:
            $ref: '#/definitions/models.DocumentResponse'
        "400":
          description: Invalid user ID format - must be valid UUID
          schema:
            $ref: '#/definitions/httpx.JSendFailUserIDInvalid'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: "Forbidden - user does not have admin role\"\t\t\t\t\t\texample({\"status\":
            \"error\", \"message\": \"Acceso denegado - se requiere rol de administrador\",
            \"code\": 403})"
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: "Documents not found - specified user has no document record\"\texample({\"status\":
            \"fail\", \"data\": {\"error\": \"Documentos no encontrados\"}})"
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - database query failed or connection
            error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get user documents (Admin)
      tags:
      - documents
  /documents/{user_id}/review:
    patch:
      consumes:
      - application/json
      description: '**Admin-only endpoint** to mark a user''s documents as reviewed
        (approved) or unreviewed (rejected/pending) after manual verification. **Driver
        onboarding workflow**: 1) Admin calls GET /documents/{user_id} to retrieve
        all submitted documents, 2) Admin manually verifies: vehicle registration
        authenticity, INE/driver license validity and photo match, fiscal certificate
        legitimacy and RFC format correctness, vehicle insurance and circulation card
        validity, 3) Admin calls this endpoint with {"reviewed": true} to approve
        or {"reviewed": false} to reject. **Business logic impact**: Setting reviewed=true
        typically activates the driver account and makes them eligible for automatic
        order assignment. Setting reviewed=false may trigger notification to driver
        to resubmit documents. **Access control**: Requires admin role JWT - non-admin
        users receive 403 Forbidden. The user_id path parameter must be valid UUID.
        Request body must contain boolean ''reviewed'' field. Returns success message
        with updated review status.'
      parameters:
      - description: User ID in UUID format
        example: 550e8400-e29b-41d4-a716-446655440000
        in: path
        name: user_id
        required: true
        type: string
      - description: Review status - true to approve, false to reject
        in: body
        name: request
        required: true
        schema:
          properties:
            reviewed:
              type: boolean
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: "Review status updated successfully - driver account status
            may be affected\"\texample({\"status\": \"success\", \"data\": {\"message\":
            \"Estado de revisión actualizado exitosamente\", \"reviewed\": true}})"
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid request body - malformed JSON or missing reviewed field
          schema:
            $ref: '#/definitions/httpx.JSendFailInvalidJSON'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: "Forbidden - user does not have admin role\"\t\t\t\t\t\t\t\texample({\"status\":
            \"error\", \"message\": \"Acceso denegado - se requiere rol de administrador\",
            \"code\": 403})"
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: "Documents not found - specified user has no document record
            to review\"\texample({\"status\": \"fail\", \"data\": {\"error\": \"Documentos
            no encontrados\"}})"
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - database update operation failed or
            connection error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Review user documents (Admin)
      tags:
      - documents
  /documents/me:
    delete:
      consumes:
      - application/json
      description: 'Permanently delete the authenticated user''s entire document record
        from the database. **This action is irreversible** - all data will be lost
        including vehicle information, all document URLs, and fiscal data. The files
        themselves remain in R2 storage but are no longer linked to the user account.
        After deletion, user can create a fresh document record via PATCH /documents/me
        and re-upload files. **Use cases**: User wants to restart document submission
        process from scratch, user wants to remove all stored document information,
        or driver is switching to a different vehicle and needs to resubmit all documents.
        Returns 404 if no document record exists for the user.'
      produces:
      - application/json
      responses:
        "200":
          description: "Documents deleted successfully - user can now create new document
            record\"\texample({\"status\": \"success\", \"data\": {\"message\": \"Documentos
            eliminados exitosamente\"}})"
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: "Documents not found - user has no document record to delete\"\texample({\"status\":
            \"fail\", \"data\": {\"error\": \"Documentos no encontrados\"}})"
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - database delete operation failed or
            connection error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Delete my documents
      tags:
      - documents
    get:
      consumes:
      - application/json
      description: 'Retrieve the authenticated user''s complete document record including:
        **Document URLs** (circulation_card_url, ine_front_url, ine_back_url, driver_license_front_url,
        driver_license_back_url, profile_photo_url), **Vehicle Info** (vehicle_brand,
        vehicle_model, license_plate), **Fiscal Data** (fiscal_name, fiscal_rfc, fiscal_zip_code,
        fiscal_regime, fiscal_street, fiscal_ext_number, fiscal_int_number, fiscal_neighborhood,
        fiscal_city, fiscal_state, fiscal_certificate_url), and **Review Status**
        (reviewed: boolean indicating admin approval). Returns null if user has not
        created a document record yet. The reviewed field is set by admins via PATCH
        /documents/{user_id}/review after manual verification - true means documents
        are approved and driver can receive orders, false means pending review or
        rejected.'
      produces:
      - application/json
      responses:
        "200":
          description: "Document record retrieved successfully with all fields, or
            null if no documents exist yet\"\texample({\"status\": \"success\", \"data\":
            {\"id\": \"550e8400-e29b-41d4-a716-446655440000\", \"user_id\": \"123e4567-e89b-12d3-a456-426614174000\",
            \"vehicle_brand\": \"Honda\", \"vehicle_model\": \"CBR 250\", \"license_plate\":
            \"ABC-123-XYZ\", \"ine_front_url\": \"https://storage.example.com/docs/ine_front.jpg\",
            \"reviewed\": false, \"created_at\": \"2025-01-15T10:30:00Z\", \"updated_at\":
            \"2025-01-15T11:00:00Z\"}})"
          schema:
            $ref: '#/definitions/models.DocumentResponse'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - database query failed or connection
            error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get my documents
      tags:
      - documents
    patch:
      consumes:
      - application/json
      description: 'Create or partially update the authenticated user''s document
        record using upsert pattern (creates if doesn''t exist, updates if exists).
        **All fields are optional** - send only the fields you want to create/update.
        **Typical workflow**: 1) Upload file via POST /documents/upload to get URL,
        2) PATCH this endpoint with {"ine_front_url": "returned_url"} to save. Supports
        progressive submission - add vehicle info first, then fiscal data later, etc.
        **Validation rules**: RFC format (13 alphanumeric characters following SAT
        pattern: ^[A-ZÑ&]{3,4}\d{6}[A-Z0-9]{3}$), ZIP code (exactly 5 digits), fiscal_regime
        enum (general, simplificado_confianza, actividad_empresarial, arrendamiento,
        salarios, incorporacion_fiscal). **Note**: The reviewed field cannot be modified
        by users - only admins can change it via PATCH /documents/{user_id}/review
        after manual verification. Returns the complete document record after operation.'
      parameters:
      - description: Document fields to create/update - all optional, send only what
          you need
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateDocumentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Documents created or updated successfully - returns complete
            document record with all fields
          schema:
            $ref: '#/definitions/models.DocumentResponse'
        "400":
          description: 'Invalid fiscal regime - valores permitidos: general, simplificado_confianza,
            actividad_empresarial, arrendamiento, salarios, incorporacion_fiscal'
          schema:
            $ref: '#/definitions/httpx.JSendFailFiscalRegimeInvalid'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - database upsert operation failed or
            connection error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Create or update my documents (upsert)
      tags:
      - documents
  /documents/upload:
    post:
      consumes:
      - multipart/form-data
      description: 'Upload a single document file to Cloudflare R2 storage using multipart/form-data.
        **Maximum file size: 10 MB**. **Supported formats: JPEG, PNG, PDF**. The file
        is stored in R2 with path structure: documents/{user_id}/{doc_type}/{uuid}.{ext}.
        Returns the public URL which should be saved via PATCH /documents/me. **Workflow**:
        1) Upload file here to get URL, 2) Call PATCH /documents/me with {"ine_front_url":
        "returned_url"} to save in database. Each document type corresponds to a specific
        field in the document record (circulation_card → circulation_card_url, ine_front
        → ine_front_url, etc.).'
      parameters:
      - description: 'Document file - max 10 MB, formats: JPEG/PNG/PDF'
        in: formData
        name: file
        required: true
        type: file
      - description: Document type - determines storage path and field name
        enum:
        - circulation_card
        - ine_front
        - ine_back
        - driver_license_front
        - driver_license_back
        - profile_photo
        - fiscal_certificate
        in: formData
        name: type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: "File uploaded successfully to R2 - returns public URL and
            document type\"\texample({\"status\": \"success\", \"data\": {\"url\":
            \"https://pub-abc123.r2.dev/documents/550e8400-e29b-41d4-a716-446655440000/ine_front/a1b2c3d4.jpg\",
            \"type\": \"ine_front\"}})"
          schema:
            properties:
              data:
                properties:
                  type:
                    type: string
                  url:
                    type: string
                type: object
              status:
                type: string
            type: object
        "400":
          description: Unsupported file type - solo se permiten imágenes JPEG/PNG
            y archivos PDF
          schema:
            $ref: '#/definitions/httpx.JSendFailFileType'
        "401":
          description: Unauthorized - missing or invalid JWT token in Authorization
            header
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to upload file to R2 storage
            or S3 API error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Upload document file
      tags:
      - documents
  /drivers/me/active-order:
    get:
      consumes:
      - application/json
      description: Get the active order for the authenticated driver
      produces:
      - application/json
      responses:
        "200":
          description: Active order retrieved
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: No active order
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get my active order
      tags:
      - orders
  /drivers/me/assignments:
    get:
      consumes:
      - application/json
      description: Get all pending order assignments for the authenticated driver
      produces:
      - application/json
      responses:
        "200":
          description: Pending assignments list
          schema:
            allOf:
            - $ref: '#/definitions/httpx.JSendSuccess'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.OrderAssignment'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden - not a driver
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get my pending assignments
      tags:
      - orders
  /drivers/me/availability:
    patch:
      consumes:
      - application/json
      description: Update the current driver's availability status
      parameters:
      - description: Availability status
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateAvailabilityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Availability updated successfully
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Update my availability
      tags:
      - drivers
  /drivers/me/location:
    get:
      consumes:
      - application/json
      description: Get the current driver's location
      produces:
      - application/json
      responses:
        "200":
          description: Location retrieved successfully
          schema:
            $ref: '#/definitions/models.DriverLocationResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Location not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get my location
      tags:
      - drivers
    patch:
      consumes:
      - application/json
      description: Update the current driver's real-time location
      parameters:
      - description: Location details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateLocationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Location updated successfully
          schema:
            $ref: '#/definitions/models.DriverLocationResponse'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Update my location
      tags:
      - drivers
  /health:
    get:
      consumes:
      - application/json
      description: Check if the API is running and database connectivity
      produces:
      - application/json
      responses:
        "200":
          description: API is healthy
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
      summary: Health check
      tags:
      - system
  /merchants:
    get:
      consumes:
      - application/json
      description: List all merchants with optional filters
      parameters:
      - description: Filter by city
        in: query
        name: city
        type: string
      - description: Filter by business type
        in: query
        name: business_type
        type: string
      - description: Filter by status
        enum:
        - active
        - inactive
        - suspended
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Merchants retrieved successfully
          schema:
            $ref: '#/definitions/models.MerchantListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      summary: List merchants
      tags:
      - merchants
    post:
      consumes:
      - application/json
      description: Create a new merchant profile for the authenticated user
      parameters:
      - description: Merchant details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.CreateMerchantRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Merchant created successfully
          schema:
            $ref: '#/definitions/models.MerchantResponse'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Create merchant
      tags:
      - merchants
  /merchants/{id}:
    get:
      consumes:
      - application/json
      description: Get merchant details by ID (admin only)
      parameters:
      - description: Merchant ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Merchant retrieved successfully
          schema:
            $ref: '#/definitions/models.MerchantResponse'
        "400":
          description: Invalid merchant ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Merchant not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get merchant by ID
      tags:
      - merchants
  /merchants/me:
    get:
      consumes:
      - application/json
      description: Get merchant profile for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Merchant retrieved successfully
          schema:
            $ref: '#/definitions/models.MerchantResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Merchant not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get my merchant
      tags:
      - merchants
    patch:
      consumes:
      - application/json
      description: Update merchant profile for the authenticated user
      parameters:
      - description: Merchant update details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateMerchantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Merchant updated successfully
          schema:
            $ref: '#/definitions/models.MerchantResponse'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Merchant not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Update my merchant
      tags:
      - merchants
  /notifications:
    get:
      consumes:
      - application/json
      description: Get paginated list of notifications for the authenticated user.
        Supports pagination with page and limit query parameters. Default page size
        is 20, maximum is 100.
      parameters:
      - default: 1
        description: 'Page number (default: 1)'
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 'Items per page (default: 20, max: 100)'
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Successfully retrieved notifications
          schema:
            $ref: '#/definitions/models.NotificationListResponse'
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to retrieve notifications
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: List notifications
      tags:
      - notifications
  /notifications/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a specific notification. User must own the notification
        to delete it. This permanently removes the notification from the database.
      parameters:
      - description: Notification ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Notification deleted successfully
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid notification ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden - notification belongs to another user
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "404":
          description: Notification not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to delete notification
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Delete notification
      tags:
      - notifications
    get:
      consumes:
      - application/json
      description: Get detailed information about a specific notification. User must
        own the notification to access it.
      parameters:
      - description: Notification ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Successfully retrieved notification
          schema:
            $ref: '#/definitions/models.NotificationResponse'
        "400":
          description: Invalid notification ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden - notification belongs to another user
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "404":
          description: Notification not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to retrieve notification
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get notification details
      tags:
      - notifications
  /notifications/{id}/read:
    put:
      consumes:
      - application/json
      description: Mark a specific notification as read. This updates the is_read
        field and sets the read_at timestamp. User must own the notification.
      parameters:
      - description: Notification ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Notification marked as read successfully
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid notification ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden - notification belongs to another user
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "404":
          description: Notification not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to update notification
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Mark notification as read
      tags:
      - notifications
  /notifications/read-all:
    put:
      consumes:
      - application/json
      description: Mark all unread notifications for the authenticated user as read.
        This updates all notifications with is_read=false to is_read=true and sets
        their read_at timestamps.
      produces:
      - application/json
      responses:
        "200":
          description: All notifications marked as read successfully
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to update notifications
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Mark all notifications as read
      tags:
      - notifications
  /notifications/register-token:
    post:
      consumes:
      - application/json
      description: Register a Firebase Cloud Messaging token for push notifications.
        Tokens are device-specific and allow sending notifications to that device.
        If the token already exists, it will be updated as active.
      parameters:
      - description: FCM token details (token, device_type, optional device_id)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.RegisterTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Token registered successfully
          schema:
            $ref: '#/definitions/models.TokenResponse'
        "400":
          description: Invalid request body or validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to register token
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Register FCM token
      tags:
      - notifications
  /notifications/send:
    post:
      consumes:
      - application/json
      description: Send a push notification to a specific user. This endpoint creates
        the notification in the database and sends it via FCM to all active devices.
        Useful for testing and manual notifications.
      parameters:
      - description: Notification details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.CreateNotificationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Notification sent successfully
          schema:
            $ref: '#/definitions/models.NotificationResponse'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Send notification (Admin)
      tags:
      - notifications-admin
  /notifications/unread-count:
    get:
      consumes:
      - application/json
      description: Get the count of unread notifications for the authenticated user.
        Useful for displaying notification badges.
      produces:
      - application/json
      responses:
        "200":
          description: Successfully retrieved unread count
          schema:
            $ref: '#/definitions/models.UnreadCountResponse'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error - failed to count notifications
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get unread notification count
      tags:
      - notifications
  /notifications/unregister-token:
    delete:
      consumes:
      - application/json
      description: Deactivate a Firebase Cloud Messaging token. Use this when the
        user logs out or uninstalls the app to stop receiving notifications on that
        device.
      parameters:
      - description: FCM token to deactivate
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UnregisterTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Token unregistered successfully
          schema:
            $ref: '#/definitions/httpx.JSendSuccess'
        "400":
          description: Invalid request body or missing token
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Token not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to unregister token
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Unregister FCM token
      tags:
      - notifications
  /orders:
    get:
      consumes:
      - application/json
      description: Get paginated list of orders (filtered by role and optional status)
      parameters:
      - description: Filter by status
        in: query
        name: status
        type: string
      - default: 20
        description: 'Number of items per page (default: 20, max: 100)'
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - default: 1
        description: 'Page number (default: 1)'
        in: query
        minimum: 1
        name: page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Paginated orders list
          schema:
            $ref: '#/definitions/models.OrderListResponse'
        "400":
          description: Invalid parameters
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: List orders
      tags:
      - orders
  /orders/{id}:
    get:
      consumes:
      - application/json
      description: Get detailed information about a specific order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Order retrieved successfully
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Invalid order ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Order not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get order by ID
      tags:
      - orders
    patch:
      consumes:
      - application/json
      description: Update the status of an order (driver only). For 'delivered' status,
        delivery code must be verified first.
      parameters:
      - description: Order ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: New status
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateOrderStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Order status updated
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Order not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Update order status
      tags:
      - orders
  /orders/{id}/accept:
    post:
      consumes:
      - application/json
      description: Driver accepts an assigned order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Order accepted successfully
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Invalid order ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Order not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Accept order
      tags:
      - orders
  /orders/{id}/complete-delivery:
    post:
      consumes:
      - application/json
      description: Verify delivery code and mark order as delivered in one step
      parameters:
      - description: Order ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Delivery code
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.VerifyDeliveryCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Order completed successfully
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Validation failed or incorrect code
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Order not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Complete delivery with code verification
      tags:
      - orders
  /orders/{id}/reject:
    post:
      consumes:
      - application/json
      description: Driver rejects an assigned order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Rejection reason
        in: body
        name: request
        schema:
          $ref: '#/definitions/models.CancelOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Order rejected successfully
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Invalid order ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Order not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Reject order
      tags:
      - orders
  /orders/{id}/verify-delivery-code:
    post:
      consumes:
      - application/json
      description: Verify the delivery code before completing an order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Delivery code
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.VerifyDeliveryCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Code verification result
          schema:
            allOf:
            - $ref: '#/definitions/httpx.JSendSuccess'
            - properties:
                data:
                  additionalProperties:
                    type: boolean
                  type: object
              type: object
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: Order not found
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Verify delivery code
      tags:
      - orders
  /orders/external:
    post:
      consumes:
      - application/json
      description: Receive and create a new order from an external backend (webhook
        endpoint)
      parameters:
      - description: External order details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.CreateExternalOrderRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Order created and assignment started
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Validation failed
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/httpx.JSendError'
      summary: Create external order (webhook)
      tags:
      - orders
  /users/{id}:
    get:
      consumes:
      - application/json
      description: Get a user's profile information by their UUID. Users can only
        access their own profile unless they have admin role. Returns full user details
        including ID, name, email, phone, role, and timestamps.
      parameters:
      - description: User ID in UUID format (e.g., 550e8400-e29b-41d4-a716-446655440000)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User profile retrieved successfully with all user details
          schema:
            $ref: '#/definitions/models.UserProfileResponse'
        "400":
          description: Invalid user ID format - must be valid UUID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "401":
          description: Unauthorized - missing or invalid token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "403":
          description: Forbidden - insufficient permissions to access this user's
            profile
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: User not found - no user exists with the provided ID
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to retrieve user profile
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - users
  /users/me:
    get:
      consumes:
      - application/json
      description: Get the authenticated user's profile information including ID,
        name, email, phone, role, and timestamps. Requires valid JWT token in Authorization
        header.
      produces:
      - application/json
      responses:
        "200":
          description: User profile retrieved successfully with all user details
          schema:
            $ref: '#/definitions/models.UserProfileResponse'
        "401":
          description: Unauthorized - missing or invalid token
          schema:
            $ref: '#/definitions/httpx.JSendError'
        "404":
          description: User not found - user ID from token doesn't exist in database
          schema:
            $ref: '#/definitions/httpx.JSendFail'
        "500":
          description: Internal server error - failed to retrieve user profile
          schema:
            $ref: '#/definitions/httpx.JSendError'
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - users
produces:
- application/json
securityDefinitions:
  BearerAuth:
    description: 'Type "Bearer" followed by a space and JWT token. Example: Bearer
      eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
